### 第十二章：内中断

#### 要点

* 中断向量表在内存中存放，对于 8086PC 机，中断向量表指定放在内存地址 0 处。
从内存 0000:0000 到 0000:003F 的 1024 个单元存放着中断向量表。
一个表项占两个字，高地址存放段地址，低地址存放偏移地址。
* 中断过程
    * 取得中断类型码 N
    * pushf
    * TF=0、IF=0
    * push CS
    * push IP
    * (IP)=(N\*4)、(CS)=(N\*4+2)
* iret 的功能如下：
    * pop IP
    * pop CS
    * popf
* CPU 在执行完一条指令之后，如果检测到标志寄存器的 TF 位为 1，则产生单步中断，引发中断过程。
单步中断的中断类型码为 1。Debug 利用单步中断来实现 T 命令的功能，也就是说用 T 命令执行一条指令后，
CPU 响应单步中断，执行 Debug 设置好的处理程序。
* 在执行完向 ss 寄存器传送数据的指令后，即便发生中断，CPU 也不会响应。

#### 检测点 12.1

1. 用 Debug 查看内存，情况如下：

```
0000:0000 68 10 A7 00 8B 01 70 00-16 00 9D 03 8B 01 70 00
```

则 3 号中断源对应的中断处理程序的入口地址为： 0070:018B

2. 存储 N 号中断源对应的中断处理程序入口的偏移地址的内存单元的地址为：「4N」，
存储 N 号中断源对应的中断处理程序入口的段地址的内存单元的地址为：「4N+2」

#### 实验 12 编写 0 号中断的处理程序

编写 0 号中断的处理程序，使得在除法溢出发生时，在屏幕中间显示字符串 "divide error!"，然后返回到 DOS。

[实现](exam12.asm)
